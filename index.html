<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiservicios SP - Recepci√≥n Inteligente</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header con logo */
        .header {
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border-bottom: 2px solid #00d4ff;
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.3));
        }

        /* Hero Section */
        .hero {
            padding: 40px 20px;
            text-align: center;
            background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a0a 100%);
        }

        .hero h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: -1px;
        }

        .hero h1 span {
            color: #00d4ff;
            display: block;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .hero p {
            color: #888;
            font-size: 1.1em;
            margin-bottom: 30px;
        }

        /* Botones de servicio */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .service-btn {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: none;
            padding: 25px 20px;
            border-radius: 15px;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
        }

        .service-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.4);
        }

        .service-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .service-btn:hover::before {
            left: 100%;
        }

        .service-icon {
            font-size: 2em;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.3));
        }

        /* Modal de diagn√≥stico */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            border: 1px solid #00d4ff;
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.3);
            position: relative;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5em;
            cursor: pointer;
            color: #888;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: #fff;
        }

        .modal-title {
            color: #00d4ff;
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-block {
            margin-bottom: 25px;
        }

        .question-label {
            display: block;
            margin-bottom: 10px;
            color: #fff;
            font-weight: 600;
            font-size: 1.1em;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .option-btn {
            background: #0f3460;
            border: 2px solid transparent;
            padding: 12px;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95em;
            text-align: center;
        }

        .option-btn:hover {
            background: #1a5490;
            border-color: #00d4ff;
        }

        .option-btn.selected {
            background: #00d4ff;
            color: #000;
            font-weight: bold;
            border-color: #00d4ff;
        }

        .whatsapp-btn {
            width: 100%;
            background: #25d366;
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-btn:hover {
            background: #128c7e;
            transform: scale(1.02);
        }

        .whatsapp-btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
        }

        /* Secci√≥n de confianza */
        .trust-section {
            padding: 50px 20px;
            background: #0a0a0a;
            text-align: center;
        }

        .trust-title {
            color: #00d4ff;
            font-size: 1.8em;
            margin-bottom: 30px;
        }

        .trust-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .trust-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #333;
        }

        .trust-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .trust-card h3 {
            color: #fff;
            margin-bottom: 10px;
        }

        .trust-card p {
            color: #888;
            font-size: 0.95em;
        }

        /* Servicios detallados */
        .services-detail {
            padding: 50px 20px;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a2e 100%);
        }

        .section-title {
            text-align: center;
            color: #fff;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .section-subtitle {
            text-align: center;
            color: #00d4ff;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .services-list {
            max-width: 800px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .service-item {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #00d4ff;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s;
        }

        .service-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .service-item-icon {
            font-size: 1.5em;
        }

        /* CTA Final */
        .final-cta {
            padding: 60px 20px;
            text-align: center;
            background: radial-gradient(circle at center, #1a1a2e 0%, #000 100%);
            position: relative;
            overflow: hidden;
        }

        .final-cta::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(0, 212, 255, 0.03) 10px,
                rgba(0, 212, 255, 0.03) 20px
            );
            animation: move 20s linear infinite;
        }

        @keyframes move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .final-cta h2 {
            font-size: 2em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .final-cta p {
            color: #888;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        /* Sticky Button */
        .sticky-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(90deg, #075e54 0%, #128c7e 100%);
            padding: 15px;
            text-align: center;
            z-index: 999;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sticky-cta:hover {
            background: linear-gradient(90deg, #128c7e 0%, #25d366 100%);
        }

        .sticky-cta span {
            font-weight: bold;
            font-size: 1.1em;
        }

        /* Utilidades */
        .hidden {
            display: none !important;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .hero h1 {
                font-size: 1.8em;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 20px;
                margin: 10px;
            }
        }

        /* Loading state */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <!-- Header con Logo -->
    <header class="header">
        <img src="https://raw.githubusercontent.com/jesusvilla091921-create/multiservicios-sp/main/logo.png" alt="Multiservicios SP" class="logo">
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>¬øQu√© necesitas reparar hoy? <span>Atendemos hogares y empresas. Respuesta r√°pida en Monterrey.</span></h1>
        
        <div class="services-grid">
            <button class="service-btn" onclick="openModal('minisplit')">
                <span class="service-icon">‚ùÑÔ∏è</span>
                <div>
                    <div>Aire Acondicionado</div>
                    <small style="opacity: 0.8; font-size: 0.8em;">Minisplit</small>
                </div>
            </button>

            <button class="service-btn" onclick="openModal('plomeria')" style="background: linear-gradient(135deg, #1e3c72 0%, #4a90e2 100%);">
                <span class="service-icon">üö∞</span>
                <div>
                    <div>Plomer√≠a</div>
                    <small style="opacity: 0.8; font-size: 0.8em;">Destapaca√±os</small>
                </div>
            </button>

            <button class="service-btn" onclick="openModal('electricidad')" style="background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%); color: #000;">
                <span class="service-icon">‚ö°</span>
                <div>
                    <div>Electricidad</div>
                    <small style="opacity: 0.8; font-size: 0.8em;">Residencial y Comercial</small>
                </div>
            </button>

            <button class="service-btn" onclick="openModal('soldadura')" style="background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);">
                <span class="service-icon">üß±</span>
                <div>
                    <div>Soldadura</div>
                    <small style="opacity: 0.8; font-size: 0.8em;">Portones y Estructuras</small>
                </div>
            </button>

            <button class="service-btn" onclick="openModal('camaras')" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                <span class="service-icon">üé•</span>
                <div>
                    <div>C√°maras</div>
                    <small style="opacity: 0.8; font-size: 0.8em;">Instalaciones</small>
                </div>
            </button>

            <button class="service-btn" onclick="openModal('general')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <span class="service-icon">üè†</span>
                <div>
                    <div>Mantenimiento General</div>
                    <small style="opacity: 0.8; font-size: 0.8em;">Todo tipo de servicios</small>
                </div>
            </button>
        </div>
    </section>

    <!-- Modal de Diagn√≥stico -->
    <div id="diagnosticModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 class="modal-title" id="modalTitle">
                <span id="modalIcon">üîß</span>
                <span id="modalServiceName">Servicio</span>
            </h2>

            <div id="questionsContainer">
                <!-- Las preguntas se generan din√°micamente -->
            </div>

            <button class="whatsapp-btn pulse" id="whatsappBtn" onclick="sendToWhatsApp()" disabled>
                <span>üì±</span>
                <span>Cotizar por WhatsApp</span>
            </button>
        </div>
    </div>

    <!-- Secci√≥n de Confianza -->
    <section class="trust-section">
        <h2 class="trust-title">¬øPor qu√© confiar?</h2>
        <div class="trust-grid">
            <div class="trust-card">
                <div class="trust-icon">‚úÖ</div>
                <h3>Llegamos</h3>
                <p>Puntualidad garantizada. Respetamos tu tiempo.</p>
            </div>
            <div class="trust-card">
                <div class="trust-icon">üí¨</div>
                <h3>Cotizamos Claro</h3>
                <p>Precios transparentes, sin sorpresas ni letra chica.</p>
            </div>
            <div class="trust-card">
                <div class="trust-icon">üõ°Ô∏è</div>
                <h3>Cumplimos</h3>
                <p>T√©cnico capacitado en ESEM. Trabajo garantizado por escrito.</p>
            </div>
        </div>
    </section>

    <!-- Servicios Detallados -->
    <section class="services-detail">
        <h2 class="section-title">Hacemos esto y lo hacemos bien:</h2>
        <p class="section-subtitle">Especialistas t√©cnicos, no improvisados</p>
        
        <div class="services-list">
            <div class="service-item">
                <span class="service-item-icon">üî•</span>
                <div>
                    <strong>Soldadura en general</strong>
                    <p style="color: #888; font-size: 0.9em;">Portones, estructuras, registros, rejas</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">‚ùÑÔ∏è</span>
                <div>
                    <strong>Mantenimiento y reparaci√≥n de minisplit</strong>
                    <p style="color: #888; font-size: 0.9em;">Carga de gas, limpieza profunda, diagn√≥stico</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">üö∞</span>
                <div>
                    <strong>Plomer√≠a y destapaca√±os</strong>
                    <p style="color: #888; font-size: 0.9em;">M√°quina profesional, sin da√±ar tuber√≠as</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">‚ö°</span>
                <div>
                    <strong>Electricidad residencial y comercial</strong>
                    <p style="color: #888; font-size: 0.9em;">Instalaciones, tableros, cortocircuitos</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">üé®</span>
                <div>
                    <strong>Pintura con pulverizadora</strong>
                    <p style="color: #888; font-size: 0.9em;">Acabado profesional, r√°pido y limpio</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">üèóÔ∏è</span>
                <div>
                    <strong>Tablaroca e impermeabilizaci√≥n</strong>
                    <p style="color: #888; font-size: 0.9em;">Muros, plafones, sellado de goteras</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">üìπ</span>
                <div>
                    <strong>Instalaci√≥n de c√°maras y TV</strong>
                    <p style="color: #888; font-size: 0.9em;">CCTV, soporte, cableado estructurado</p>
                </div>
            </div>
            
            <div class="service-item">
                <span class="service-item-icon">üíß</span>
                <div>
                    <strong>Tinacos, bombas y abanicos</strong>
                    <p style="color: #888; font-size: 0.9em;">Instalaci√≥n, reparaci√≥n y mantenimiento</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Final -->
    <section class="final-cta" style="padding-bottom: 100px;">
        <h2>No cotizamos por corazonadas.</h2>
        <h2 style="color: #25d366; margin-bottom: 20px;">Cotizamos por WhatsApp.</h2>
        <p>Diagn√≥stico inteligente ‚Üí Ficha t√©cnica ‚Üí Trabajo cerrado</p>
        
        <button class="whatsapp-btn" style="max-width: 400px; margin: 0 auto;" onclick="openModal('general')">
            <span>üöÄ</span>
            <span>Quiero mi cotizaci√≥n ahora</span>
        </button>
    </section>

    <!-- Sticky Button -->
    <div class="sticky-cta" onclick="openModal('general')">
        <span>üí¨</span>
        <span>Hablar ahora con Multiservicios SP</span>
        <span style="font-size: 1.2em;">‚Üí</span>
    </div>

    <script>
        // Configuraci√≥n de servicios y sus flujos de diagn√≥stico
        const serviceConfig = {
            minisplit: {
                name: "Aire Acondicionado / Minisplit",
                icon: "‚ùÑÔ∏è",
                questions: [
                    {
                        id: "problema",
                        label: "¬øQu√© problema tienes?",
                        options: ["No enfr√≠a", "Hace ruido", "Gotea agua", "Solo necesita mantenimiento", "No enciende", "Hielo en tuber√≠as"]
                    },
                    {
                        id: "tipo",
                        label: "¬øD√≥nde se encuentra?",
                        options: ["Casa habitaci√≥n", "Negocio / Local", "Oficina", "Bodega / Industrial"]
                    },
                    {
                        id: "urgencia",
                        label: "¬øQu√© tan urgente es?",
                        options: ["Hoy mismo (emergencia)", "Ma√±ana", "Esta semana", "Puede agendarse"]
                    },
                    {
                        id: "cantidad",
                        label: "¬øCu√°ntos equipos?",
                        options: ["1 equipo", "2 equipos", "3-5 equipos", "M√°s de 5"]
                    }
                ]
            },
            plomeria: {
                name: "Plomer√≠a / Destapaca√±os",
                icon: "üö∞",
                questions: [
                    {
                        id: "problema",
                        label: "¬øQu√© necesitas resolver?",
                        options: ["Destapar ca√±o / drenaje", "Fuga de agua visible", "Grifo gotea", "W.C. tapado", "Instalar llaves/lavabo", "Tuber√≠a rota"]
                    },
                    {
                        id: "lugar",
                        label: "¬øUbicaci√≥n del problema?",
                        options: ["Cocina", "Ba√±o", "Patio / Exterior", "Toda la casa", "Negocio"]
                    },
                    {
                        id: "urgencia",
                        label: "¬øUrgencia?",
                        options: ["Emergencia (inundaci√≥n/fuga fuerte)", "Hoy", "Ma√±ana", "Esta semana"]
                    }
                ]
            },
            electricidad: {
                name: "Electricidad",
                icon: "‚ö°",
                questions: [
                    {
                        id: "problema",
                        label: "¬øQu√© sucede?",
                        options: ["Corto circuito / Plafones", "Apagones constantes", "Instalar tomas/l√°mparas", "Tablero principal", "Cableado nuevo", "Aumento de carga"]
                    },
                    {
                        id: "tipo",
                        label: "Tipo de inmueble",
                        options: ["Casa", "Departamento", "Local comercial", "Bodega / Nave", "Oficina"]
                    },
                    {
                        id: "urgencia",
                        label: "¬øCu√°ndo lo necesitas?",
                        options: ["Urgente (sin luz)", "Hoy", "Ma√±ana", "Agendar visita"]
                    }
                ]
            },
            soldadura: {
                name: "Soldadura / Herrer√≠a",
                icon: "üß±",
                questions: [
                    {
                        id: "trabajo",
                        label: "¬øQu√© necesitas?",
                        options: ["Reparar port√≥n", "Nuevo port√≥n / Reja", "Estructura met√°lica", "Soldadura general", "Registro / Tapas", "Escaleras / Barandales"]
                    },
                    {
                        id: "material",
                        label: "Material predominante",
                        options: ["Hierro / Acero", "Aluminio", "Inoxidable", "No s√© / Mixto"]
                    },
                    {
                        id: "urgencia",
                        label: "¬øTiempo de entrega?",
                        options: ["Urgente (seguridad)", "2-3 d√≠as", "Esta semana", "Planeaci√≥n"]
                    }
                ]
            },
            camaras: {
                name: "C√°maras de Seguridad",
                icon: "üé•",
                questions: [
                    {
                        id: "servicio",
                        label: "¬øQu√© necesitas?",
                        options: ["Instalaci√≥n nueva", "Reparar existente", "Agregar c√°maras", "Configurar app/celular", "Mantenimiento"]
                    },
                    {
                        id: "cantidad",
                        label: "¬øCu√°ntas c√°maras?",
                        options: ["1-2 c√°maras", "3-4 c√°maras", "5-8 c√°maras", "Sistema grande (+8)"]
                    },
                    {
                        id: "tipo",
                        label: "Tipo de lugar",
                        options: ["Casa", "Negocio peque√±o", "Bodega / Nave", "Condominio / Residencial"]
                    }
                ]
            },
            general: {
                name: "Mantenimiento General",
                icon: "üè†",
                questions: [
                    {
                        id: "servicio",
                        label: "¬øQu√© tipo de trabajo?",
                        options: ["Pintura", "Tablaroca / Muros", "Impermeabilizaci√≥n", "Instalaci√≥n tinaco/bomba", "Varios servicios", "Otro (especificar)"]
                    },
                    {
                        id: "tama√±o",
                        label: "¬øTama√±o del proyecto?",
                        options: ["Trabajo peque√±o (1 d√≠a)", "Mediano (2-3 d√≠as)", "Grande (semana+)", "Mantenimiento recurrente"]
                    },
                    {
                        id: "tipo",
                        label: "¬øD√≥nde?",
                        options: ["Casa", "Departamento", "Negocio", "Bodega / Terreno"]
                    },
                    {
                        id: "urgencia",
                        label: "¬øPrioridad?",
                        options: ["Urgente", "Esta semana", "Pr√≥xima semana", "Cotizaci√≥n para despu√©s"]
                    }
                ]
            }
        };

        let currentService = null;
        let answers = {};

        function openModal(serviceKey) {
            currentService = serviceKey;
            answers = {};
            const config = serviceConfig[serviceKey];
            
            document.getElementById('modalIcon').textContent = config.icon;
            document.getElementById('modalServiceName').textContent = config.name;
            
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            
            config.questions.forEach((q, index) => {
                const block = document.createElement('div');
                block.className = 'question-block';
                block.innerHTML = `
                    <label class="question-label">${index + 1}. ${q.label}</label>
                    <div class="options-grid" id="q-${q.id}">
                        ${q.options.map(opt => `
                            <button class="option-btn" onclick="selectOption('${q.id}', '${opt}', this)">${opt}</button>
                        `).join('')}
                    </div>
                `;
                container.appendChild(block);
            });
            
            document.getElementById('diagnosticModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            checkCompletion();
        }

        function selectOption(questionId, value, btnElement) {
            // Remover selecci√≥n previa
            const container = document.getElementById(`q-${questionId}`);
            container.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Agregar selecci√≥n nueva
            btnElement.classList.add('selected');
            answers[questionId] = value;
            
            checkCompletion();
        }

        function checkCompletion() {
            const config = serviceConfig[currentService];
            const required = config.questions.length;
            const answered = Object.keys(answers).length;
            
            const btn = document.getElementById('whatsappBtn');
            if (answered >= required) {
                btn.disabled = false;
                btn.innerHTML = '<span>üì±</span><span>Enviar ficha a WhatsApp</span>';
            } else {
                btn.disabled = true;
                btn.innerHTML = `<span>üì±</span><span>Responde ${required - answered} preguntas m√°s...</span>`;
            }
        }

        function sendToWhatsApp() {
            const config = serviceConfig[currentService];
            const phone = "5218131031445"; // N√∫mero de Multiservicios SP
            
            // Construir la ficha t√©cnica
            let message = `*NUEVA COTIZACI√ìN - MULTISERVICIOS SP*%0A%0A`;
            message += `*Servicio:* ${config.name}%0A`;
            message += `*Fecha:* ${new Date().toLocaleDateString('es-MX')}%0A%0A`;
            
            message += `*DETALLES DEL DIAGN√ìSTICO:*%0A`;
            config.questions.forEach(q => {
                const respuesta = answers[q.id] || "No especificado";
                message += `‚Ä¢ ${q.label.replace('¬ø', '').replace('?', '')}: *${respuesta}*%0A`;
            });
            
            message += `%0A*Ubicaci√≥n:* _[El cliente debe confirmar]_%0A`;
            message += `*Nombre:* _[Pendiente]_%0A%0A`;
            message += `¬øPodemos agendar visita para evaluaci√≥n?`;
            
            const url = `https://wa.me/${phone}?text=${message}`;
            window.open(url, '_blank');
            
            // Cerrar modal despu√©s de 1 segundo
            setTimeout(() => {
                closeModal();
            }, 1000);
        }

        function closeModal(e) {
            if (e && e.target !== e.currentTarget) return;
            document.getElementById('diagnosticModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Cerrar con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
